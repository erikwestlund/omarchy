#!/bin/bash
# Pull VS Code settings from system to Omarchy repo
# Usage: vspull

set -e

REPO_DIR="$HOME/Omarchy/config/vscode"
VSCODE_DIR="$HOME/.config/Code/User"

if [[ ! -d "$VSCODE_DIR" ]]; then
    echo "Error: VS Code config not found at $VSCODE_DIR"
    exit 1
fi

mkdir -p "$REPO_DIR"

# Copy settings
if [[ -f "$VSCODE_DIR/settings.json" ]]; then
    cp "$VSCODE_DIR/settings.json" "$REPO_DIR/settings.json"
    echo "Pulled settings.json"
fi

if [[ -f "$VSCODE_DIR/keybindings.json" ]]; then
    cp "$VSCODE_DIR/keybindings.json" "$REPO_DIR/keybindings.json"
    echo "Pulled keybindings.json"
fi

# Copy snippets if they exist
if [[ -d "$VSCODE_DIR/snippets" ]]; then
    mkdir -p "$REPO_DIR/snippets"
    cp -r "$VSCODE_DIR/snippets/"* "$REPO_DIR/snippets/" 2>/dev/null || true
    echo "Pulled snippets"
fi

echo "VS Code settings pulled from system to repo"
echo "Don't forget to commit changes in ~/Omarchy"
