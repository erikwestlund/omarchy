#!/bin/bash
# Launch script for ohdsi-diabetic-retinopathy-treatment-patterns
#
# This script launches the ohdsi-diabetic-retinopathy-treatment-patterns development environment with:
# - Editor on the active workspace
# - Notification system (shows progress updates)

# === Project Config ===
PROJECT_NAME="ohdsi-diabetic-retinopathy-treatment-patterns"
PROJECT_DIR="/home/erik/Projects/ohdsi-diabetic-retinopathy-treatment-patterns"
WORKSPACE_FILE="$HOME/Omarchy/projects/ohdsi-diabetic-retinopathy-treatment-patterns/ohdsi-diabetic-retinopathy-treatment-patterns.code-workspace"
EDITOR="/usr/share/positron/bin/positron"
VIEW_URL=""

# === Launch ===
notify-send -u low "OHDSI DR Treatment Patterns" "Launching..." -t 5000

# Start tmux session (if not already running) - run detached so it doesn't block
TMUX_SCRIPT="$HOME/Omarchy/projects/ohdsi-diabetic-retinopathy-treatment-patterns/tmux.sh"
if [ -x "$TMUX_SCRIPT" ]; then
    "$TMUX_SCRIPT" </dev/null &
    sleep 0.5
fi

# Open browser first (right side), then editor (left side)
if [ -n "$VIEW_URL" ]; then
    chromium --new-window "$VIEW_URL" &
    sleep 0.3
fi

$EDITOR "$WORKSPACE_FILE" &

notify-send -u low "OHDSI DR Treatment Patterns" "Ready!" -t 3000
