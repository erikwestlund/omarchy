#!/bin/bash
# Kill script for framework-site

PROJECT_NAME="framework-site"
PROJECT_DIR="$HOME/Projects/framework-site"

echo "Stopping $PROJECT_NAME..."

# Stop Docker services
if [ -f "$PROJECT_DIR/docker-compose.yml" ]; then
    echo "Stopping Docker services..."
    (cd "$PROJECT_DIR" && docker compose down)
fi

# Kill VS Code window for this project
echo "Closing VS Code..."
VSCODE_ADDRS=$(hyprctl clients -j | jq -r --arg dir "$PROJECT_DIR" '.[] | select(.class == "code" or .class == "Code") | select(.title | contains($dir) or contains("framework-site")) | .address')
for addr in $VSCODE_ADDRS; do
    hyprctl dispatch closewindow "address:$addr" 2>/dev/null
done

echo "Done! $PROJECT_NAME stopped."
